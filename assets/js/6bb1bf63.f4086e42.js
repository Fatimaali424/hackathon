"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2177],{2740(e,n,i){i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"module-1/lab-1-publisher-subscriber","title":"Lab 1: Basic ROS 2 Publisher/Subscriber","description":"Overview","source":"@site/docs/module-1/lab-1-publisher-subscriber.md","sourceDirName":"module-1","slug":"/module-1/lab-1-publisher-subscriber","permalink":"/hackathon/docs/module-1/lab-1-publisher-subscriber","draft":false,"unlisted":false,"editUrl":"https://github.com/Fatimaali424/hackathon/edit/main/website/docs/module-1/lab-1-publisher-subscriber.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Integration","permalink":"/hackathon/docs/module-1/ros2-integration"},"next":{"title":"Lab 2: Service and Action Implementation","permalink":"/hackathon/docs/module-1/lab-2-services-actions"}}');var r=i(4848),l=i(8453);const t={sidebar_position:5},a="Lab 1: Basic ROS 2 Publisher/Subscriber",o={},c=[{value:"Overview",id:"overview",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Lab Setup",id:"lab-setup",level:2},{value:"Python Implementation",id:"python-implementation",level:2},{value:"Publisher Node",id:"publisher-node",level:3},{value:"Subscriber Node",id:"subscriber-node",level:3},{value:"Setup for Execution",id:"setup-for-execution",level:3},{value:"C++ Implementation (Alternative)",id:"c-implementation-alternative",level:2},{value:"Publisher Node (C++)",id:"publisher-node-c",level:3},{value:"Subscriber Node (C++)",id:"subscriber-node-c",level:3},{value:"Building and Running the Lab",id:"building-and-running-the-lab",level:2},{value:"For Python Implementation:",id:"for-python-implementation",level:3},{value:"For C++ Implementation:",id:"for-c-implementation",level:3},{value:"Monitoring Communication",id:"monitoring-communication",level:2},{value:"Using ROS 2 Command Line Tools",id:"using-ros-2-command-line-tools",level:3},{value:"Using Quality of Service Settings",id:"using-quality-of-service-settings",level:3},{value:"Lab Exercises",id:"lab-exercises",level:2},{value:"Exercise 1: Modify Message Content",id:"exercise-1-modify-message-content",level:3},{value:"Exercise 2: Multiple Publishers and Subscribers",id:"exercise-2-multiple-publishers-and-subscribers",level:3},{value:"Exercise 3: Quality of Service Experimentation",id:"exercise-3-quality-of-service-experimentation",level:3},{value:"Exercise 4: Error Handling",id:"exercise-4-error-handling",level:3},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues",level:2},{value:"Nodes Can&#39;t Communicate",id:"nodes-cant-communicate",level:3},{value:"Performance Issues",id:"performance-issues",level:3},{value:"Discovery Issues",id:"discovery-issues",level:3},{value:"Summary",id:"summary",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"lab-1-basic-ros-2-publishersubscriber",children:"Lab 1: Basic ROS 2 Publisher/Subscriber"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"In this lab, you will implement a basic publisher/subscriber system in ROS 2. This is the fundamental communication pattern in ROS 2 and forms the basis for most robotic applications. You'll create a publisher node that sends messages and a subscriber node that receives and processes those messages."}),"\n",(0,r.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(n.p,{children:"After completing this lab, you will be able to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Create ROS 2 publisher and subscriber nodes"}),"\n",(0,r.jsx)(n.li,{children:"Implement message passing between nodes"}),"\n",(0,r.jsx)(n.li,{children:"Use ROS 2 command-line tools to monitor communication"}),"\n",(0,r.jsx)(n.li,{children:"Debug basic ROS 2 communication issues"}),"\n",(0,r.jsx)(n.li,{children:"Understand Quality of Service (QoS) settings"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"ROS 2 Humble Hawksbill installed"}),"\n",(0,r.jsx)(n.li,{children:"Basic knowledge of Python or C++"}),"\n",(0,r.jsx)(n.li,{children:"Understanding of ROS 2 concepts from previous chapters"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"lab-setup",children:"Lab Setup"}),"\n",(0,r.jsx)(n.p,{children:"First, create a new ROS 2 package for this lab:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create a new workspace if you don't have one\nmkdir -p ~/ros2_labs/src\ncd ~/ros2_labs/src\n\n# Create the lab package\nros2 pkg create --build-type ament_python ros2_lab1 --dependencies rclpy std_msgs\n"})}),"\n",(0,r.jsx)(n.h2,{id:"python-implementation",children:"Python Implementation"}),"\n",(0,r.jsx)(n.h3,{id:"publisher-node",children:"Publisher Node"}),"\n",(0,r.jsxs)(n.p,{children:["Create the publisher node in ",(0,r.jsx)(n.code,{children:"ros2_lab1/ros2_lab1/publisher_member_function.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass MinimalPublisher(Node):\n\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    minimal_publisher = MinimalPublisher()\n\n    rclpy.spin(minimal_publisher)\n\n    # Destroy the node explicitly\n    minimal_publisher.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"subscriber-node",children:"Subscriber Node"}),"\n",(0,r.jsxs)(n.p,{children:["Create the subscriber node in ",(0,r.jsx)(n.code,{children:"ros2_lab1/ros2_lab1/subscriber_member_function.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\n\nclass MinimalSubscriber(Node):\n\n    def __init__(self):\n        super().__init__('minimal_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'topic',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    minimal_subscriber = MinimalSubscriber()\n\n    rclpy.spin(minimal_subscriber)\n\n    # Destroy the node explicitly\n    minimal_subscriber.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"setup-for-execution",children:"Setup for Execution"}),"\n",(0,r.jsxs)(n.p,{children:["Update the ",(0,r.jsx)(n.code,{children:"setup.py"})," file to make the nodes executable:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from setuptools import find_packages, setup\n\npackage_name = 'ros2_lab1'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=find_packages(exclude=['test']),\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='your_name',\n    maintainer_email='your_email@example.com',\n    description='Basic ROS 2 publisher/subscriber lab',\n    license='Apache-2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'talker = ros2_lab1.publisher_member_function:main',\n            'listener = ros2_lab1.subscriber_member_function:main',\n        ],\n    },\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"c-implementation-alternative",children:"C++ Implementation (Alternative)"}),"\n",(0,r.jsx)(n.p,{children:"For those who prefer C++, here's the equivalent implementation:"}),"\n",(0,r.jsx)(n.h3,{id:"publisher-node-c",children:"Publisher Node (C++)"}),"\n",(0,r.jsxs)(n.p,{children:["Create ",(0,r.jsx)(n.code,{children:"ros2_lab1/src/talker.cpp"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'#include "rclcpp/rclcpp.hpp"\n#include "std_msgs/msg/string.hpp"\n\nusing namespace std::chrono_literals;\n\nclass MinimalPublisher : public rclcpp::Node\n{\npublic:\n    MinimalPublisher()\n    : Node("minimal_publisher"), count_(0)\n    {\n        publisher_ = this->create_publisher<std_msgs::msg::String>("topic", 10);\n        timer_ = this->create_wall_timer(\n            500ms, std::bind(&MinimalPublisher::timer_callback, this));\n    }\n\nprivate:\n    void timer_callback()\n    {\n        auto message = std_msgs::msg::String();\n        message.data = "Hello World: " + std::to_string(count_++);\n        RCLCPP_INFO(this->get_logger(), "Publishing: \'%s\'", message.data.c_str());\n        publisher_->publish(message);\n    }\n    rclcpp::TimerBase::SharedPtr timer_;\n    rclcpp::Publisher<std_msgs::msg::String>::SharedPtr publisher_;\n    size_t count_;\n};\n\nint main(int argc, char * argv[])\n{\n    rclcpp::init(argc, argv);\n    rclcpp::spin(std::make_shared<MinimalPublisher>());\n    rclcpp::shutdown();\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"subscriber-node-c",children:"Subscriber Node (C++)"}),"\n",(0,r.jsxs)(n.p,{children:["Create ",(0,r.jsx)(n.code,{children:"ros2_lab1/src/listener.cpp"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'#include "rclcpp/rclcpp.hpp"\n#include "std_msgs/msg/string.hpp"\n\nclass MinimalSubscriber : public rclcpp::Node\n{\npublic:\n    MinimalSubscriber()\n    : Node("minimal_subscriber")\n    {\n        subscription_ = this->create_subscription<std_msgs::msg::String>(\n            "topic", 10,\n            [this](const std_msgs::msg::String::SharedPtr msg) {\n                RCLCPP_INFO(this->get_logger(), "I heard: \'%s\'", msg->data.c_str());\n            });\n    }\n\nprivate:\n    rclcpp::Subscription<std_msgs::msg::String>::SharedPtr subscription_;\n};\n\nint main(int argc, char * argv[])\n{\n    rclcpp::init(argc, argv);\n    rclcpp::spin(std::make_shared<MinimalSubscriber>());\n    rclcpp::shutdown();\n    return 0;\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["For C++, also update the ",(0,r.jsx)(n.code,{children:"CMakeLists.txt"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cmake",children:'cmake_minimum_required(VERSION 3.8)\nproject(ros2_lab1)\n\nif(CMAKE_COMPILER_IS_GNUCXX OR CMAKE_CXX_COMPILER_ID MATCHES "Clang")\n  add_compile_options(-Wall -Wextra -Wpedantic)\nendif()\n\n# find dependencies\nfind_package(ament_cmake REQUIRED)\nfind_package(rclcpp REQUIRED)\nfind_package(std_msgs REQUIRED)\n\n# Create executables\nadd_executable(talker src/talker.cpp)\nadd_executable(listener src/listener.cpp)\n\n# Link libraries\nament_target_dependencies(talker rclcpp std_msgs)\nament_target_dependencies(listener rclcpp std_msgs)\n\ninstall(TARGETS\n  talker\n  listener\n  DESTINATION lib/${PROJECT_NAME})\n\nif(BUILD_TESTING)\n  find_package(ament_lint_auto REQUIRED)\n  ament_lint_auto_find_test_dependencies()\nendif()\n\nament_package()\n'})}),"\n",(0,r.jsx)(n.h2,{id:"building-and-running-the-lab",children:"Building and Running the Lab"}),"\n",(0,r.jsx)(n.h3,{id:"for-python-implementation",children:"For Python Implementation:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Navigate to your workspace\ncd ~/ros2_labs\n\n# Build the package\ncolcon build --packages-select ros2_lab1\n\n# Source the workspace\nsource install/setup.bash\n\n# Run the publisher in one terminal\nros2 run ros2_lab1 talker\n\n# In another terminal, run the subscriber\nros2 run ros2_lab1 listener\n"})}),"\n",(0,r.jsx)(n.h3,{id:"for-c-implementation",children:"For C++ Implementation:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Navigate to your workspace\ncd ~/ros2_labs\n\n# Build the package\ncolcon build --packages-select ros2_lab1\n\n# Source the workspace\nsource install/setup.bash\n\n# Run the publisher in one terminal\nros2 run ros2_lab1 talker\n\n# In another terminal, run the subscriber\nros2 run ros2_lab1 listener\n"})}),"\n",(0,r.jsx)(n.h2,{id:"monitoring-communication",children:"Monitoring Communication"}),"\n",(0,r.jsx)(n.h3,{id:"using-ros-2-command-line-tools",children:"Using ROS 2 Command Line Tools"}),"\n",(0,r.jsx)(n.p,{children:"Monitor the communication between nodes:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# List all active topics\nros2 topic list\n\n# Echo messages on the topic\nros2 topic echo /topic std_msgs/msg/String\n\n# Get information about the topic\nros2 topic info /topic\n\n# Show bandwidth usage\nros2 topic hz /topic\n"})}),"\n",(0,r.jsx)(n.h3,{id:"using-quality-of-service-settings",children:"Using Quality of Service Settings"}),"\n",(0,r.jsx)(n.p,{children:"Modify the publisher to use different QoS settings:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, QoSDurabilityPolicy, QoSHistoryPolicy, QoSReliabilityPolicy\n\n# Create a custom QoS profile\nqos_profile = QoSProfile(\n    depth=10,\n    durability=QoSDurabilityPolicy.TRANSIENT_LOCAL,\n    history=QoSHistoryPolicy.KEEP_LAST,\n    reliability=QoSReliabilityPolicy.RELIABLE\n)\n\n# Use the custom QoS profile\nself.publisher_ = self.create_publisher(String, 'topic', qos_profile)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"lab-exercises",children:"Lab Exercises"}),"\n",(0,r.jsx)(n.h3,{id:"exercise-1-modify-message-content",children:"Exercise 1: Modify Message Content"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Change the publisher to send different types of messages (e.g., include timestamps, sequence numbers)"}),"\n",(0,r.jsx)(n.li,{children:"Modify the message format to include more structured data"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"exercise-2-multiple-publishers-and-subscribers",children:"Exercise 2: Multiple Publishers and Subscribers"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Create multiple publisher nodes with different message patterns"}),"\n",(0,r.jsx)(n.li,{children:"Create multiple subscriber nodes that process messages differently"}),"\n",(0,r.jsx)(n.li,{children:"Observe how messages are distributed among subscribers"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"exercise-3-quality-of-service-experimentation",children:"Exercise 3: Quality of Service Experimentation"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Try different QoS settings (reliable vs best effort, different history depths)"}),"\n",(0,r.jsx)(n.li,{children:"Observe the impact on message delivery and performance"}),"\n",(0,r.jsx)(n.li,{children:"Document when to use different QoS policies"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"exercise-4-error-handling",children:"Exercise 4: Error Handling"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Add error handling to your publisher and subscriber nodes"}),"\n",(0,r.jsx)(n.li,{children:"Implement graceful degradation when communication fails"}),"\n",(0,r.jsx)(n.li,{children:"Add logging for debugging purposes"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting-common-issues",children:"Troubleshooting Common Issues"}),"\n",(0,r.jsx)(n.h3,{id:"nodes-cant-communicate",children:"Nodes Can't Communicate"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Check that both nodes are on the same ROS domain ID"}),"\n",(0,r.jsx)(n.li,{children:"Verify that topic names match exactly"}),"\n",(0,r.jsx)(n.li,{children:"Ensure both nodes are using compatible QoS settings"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Check system resources (CPU, memory, network)"}),"\n",(0,r.jsx)(n.li,{children:"Adjust QoS settings for better performance"}),"\n",(0,r.jsx)(n.li,{children:"Consider message size and frequency"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"discovery-issues",children:"Discovery Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Verify network configuration"}),"\n",(0,r.jsx)(n.li,{children:"Check for firewall blocking ROS communication"}),"\n",(0,r.jsx)(n.li,{children:"Ensure RMW implementation is properly configured"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(n.p,{children:"In this lab, you've implemented a basic publisher/subscriber system in ROS 2, which is the fundamental communication pattern in ROS. You've learned how to:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Create publisher and subscriber nodes in both Python and C++"}),"\n",(0,r.jsx)(n.li,{children:"Use ROS 2 command-line tools to monitor communication"}),"\n",(0,r.jsx)(n.li,{children:"Configure Quality of Service settings"}),"\n",(0,r.jsx)(n.li,{children:"Troubleshoot common communication issues"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This foundation will be essential as you progress to more complex ROS 2 applications involving services, actions, and multi-node systems."})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>t,x:()=>a});var s=i(6540);const r={},l=s.createContext(r);function t(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);