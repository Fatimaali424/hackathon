"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[9814],{6720(n,e,i){i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>m,frontMatter:()=>r,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"module-2/lab-6-unity-integration","title":"Lab 6: Unity Integration with Simulation","description":"Overview","source":"@site/docs/module-2/lab-6-unity-integration.md","sourceDirName":"module-2","slug":"/module-2/lab-6-unity-integration","permalink":"/hackathon/docs/module-2/lab-6-unity-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/Fatimaali424/hackathon/edit/main/website/docs/module-2/lab-6-unity-integration.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Lab 5: Advanced Sensor Simulation","permalink":"/hackathon/docs/module-2/lab-5-sensor-simulation"},"next":{"title":"Module 2 Assignment: Comprehensive Simulation Project","permalink":"/hackathon/docs/module-2/assignment"}}');var o=i(4848),s=i(8453);const r={sidebar_position:7},a="Lab 6: Unity Integration with Simulation",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Lab Setup",id:"lab-setup",level:2},{value:"1. Unity Environment Setup",id:"1-unity-environment-setup",level:3},{value:"2. ROS 2 Bridge Configuration",id:"2-ros-2-bridge-configuration",level:3},{value:"Unity Integration Architecture",id:"unity-integration-architecture",level:2},{value:"Unity Visualizer Node Implementation",id:"unity-visualizer-node-implementation",level:3},{value:"Unity Controller Node Implementation",id:"unity-controller-node-implementation",level:3},{value:"Unity Scene Implementation",id:"unity-scene-implementation",level:2},{value:"1. Robot Model Setup in Unity",id:"1-robot-model-setup-in-unity",level:3},{value:"2. Unity User Interface",id:"2-unity-user-interface",level:3},{value:"Integration Testing",id:"integration-testing",level:2},{value:"1. Setup Integration Test Environment",id:"1-setup-integration-test-environment",level:3},{value:"Running the Unity Integration System",id:"running-the-unity-integration-system",level:2},{value:"1. Launch Gazebo Simulation",id:"1-launch-gazebo-simulation",level:3},{value:"2. Launch ROS 2 Bridge Nodes",id:"2-launch-ros-2-bridge-nodes",level:3},{value:"3. Run Unity Application",id:"3-run-unity-application",level:3},{value:"4. Test the Integration",id:"4-test-the-integration",level:3},{value:"Lab Exercises",id:"lab-exercises",level:2},{value:"Exercise 1: Enhanced Visualization",id:"exercise-1-enhanced-visualization",level:3},{value:"Exercise 2: Advanced User Interface",id:"exercise-2-advanced-user-interface",level:3},{value:"Exercise 3: Multi-Robot Visualization",id:"exercise-3-multi-robot-visualization",level:3},{value:"Exercise 4: Mixed Reality Integration",id:"exercise-4-mixed-reality-integration",level:3},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues",level:2},{value:"Connection Issues",id:"connection-issues",level:3},{value:"Synchronization Issues",id:"synchronization-issues",level:3},{value:"Performance Issues",id:"performance-issues",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Data Optimization",id:"1-data-optimization",level:3},{value:"2. Visualization Quality",id:"2-visualization-quality",level:3},{value:"3. User Experience",id:"3-user-experience",level:3},{value:"Summary",id:"summary",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"lab-6-unity-integration-with-simulation",children:"Lab 6: Unity Integration with Simulation"})}),"\n",(0,o.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(e.p,{children:"In this lab, you will integrate Unity with your ROS 2 simulation environment to create advanced visualization and human-robot interaction capabilities. This lab demonstrates how to connect Unity's powerful graphics engine with Gazebo's physics simulation through ROS 2, creating a comprehensive digital twin system with intuitive user interfaces."}),"\n",(0,o.jsx)(e.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,o.jsx)(e.p,{children:"After completing this lab, you will be able to:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Set up Unity-ROS 2 integration using the Unity Robotics Hub"}),"\n",(0,o.jsx)(e.li,{children:"Create synchronized visualization between Gazebo simulation and Unity"}),"\n",(0,o.jsx)(e.li,{children:"Implement human-robot interaction interfaces in Unity"}),"\n",(0,o.jsx)(e.li,{children:"Design intuitive user interfaces for robot teleoperation"}),"\n",(0,o.jsx)(e.li,{children:"Validate simulation-visualization synchronization"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Completion of Lab 4 and Lab 5"}),"\n",(0,o.jsx)(e.li,{children:"Unity 2021.3 LTS or later installed"}),"\n",(0,o.jsx)(e.li,{children:"Unity Robotics Hub and ROS-TCP-Connector packages"}),"\n",(0,o.jsx)(e.li,{children:"Gazebo simulation environment from previous labs"}),"\n",(0,o.jsx)(e.li,{children:"ROS 2 Humble Hawksbill with required interfaces"}),"\n",(0,o.jsx)(e.li,{children:"Understanding of Unity C# scripting"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"lab-setup",children:"Lab Setup"}),"\n",(0,o.jsx)(e.h3,{id:"1-unity-environment-setup",children:"1. Unity Environment Setup"}),"\n",(0,o.jsx)(e.p,{children:"First, ensure you have the required Unity packages installed:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# In your Unity project, install the following packages via Package Manager:\n# - Unity Robotics Hub\n# - ROS-TCP-Connector\n# - XR Interaction Toolkit (optional, for advanced interfaces)\n"})}),"\n",(0,o.jsx)(e.h3,{id:"2-ros-2-bridge-configuration",children:"2. ROS 2 Bridge Configuration"}),"\n",(0,o.jsx)(e.p,{children:"Create a ROS 2 bridge package for Unity integration:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Navigate to your workspace\ncd ~/ros2_labs/src\n\n# Create the Unity integration package\nros2 pkg create --build-type ament_python unity_integration --dependencies rclpy std_msgs geometry_msgs sensor_msgs visualization_msgs\n"})}),"\n",(0,o.jsx)(e.h2,{id:"unity-integration-architecture",children:"Unity Integration Architecture"}),"\n",(0,o.jsx)(e.p,{children:"The Unity integration system will consist of:"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Unity Visualizer Node"}),": Receives robot state and renders in Unity"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Unity Controller Node"}),": Processes user input from Unity UI"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Synchronization Manager"}),": Keeps Unity and Gazebo states aligned"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"User Interface System"}),": Provides teleoperation controls"]}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"unity-visualizer-node-implementation",children:"Unity Visualizer Node Implementation"}),"\n",(0,o.jsxs)(e.p,{children:["Create the Unity visualizer node in ",(0,o.jsx)(e.code,{children:"unity_integration/unity_integration/visualizer_node.py"}),":"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\nfrom geometry_msgs.msg import Pose, Twist\nfrom sensor_msgs.msg import JointState\nfrom nav_msgs.msg import Odometry\nimport socket\nimport json\nimport threading\n\n\nclass UnityVisualizerNode(Node):\n    def __init__(self):\n        super().__init__('unity_visualizer_node')\n\n        # ROS 2 subscribers for robot state\n        self.odom_subscriber = self.create_subscription(\n            Odometry, '/odom', self.odom_callback, 10)\n\n        self.joint_state_subscriber = self.create_subscription(\n            JointState, '/joint_states', self.joint_state_callback, 10)\n\n        self.laser_subscriber = self.create_subscription(\n            String, '/unity_commands', self.unity_command_callback, 10)\n\n        # TCP connection to Unity\n        self.unity_socket = None\n        self.connect_to_unity()\n\n        # Timer for sending state updates to Unity\n        self.update_timer = self.create_timer(0.033, self.send_state_to_unity)  # ~30 Hz\n\n        # Robot state storage\n        self.robot_pose = Pose()\n        self.joint_positions = {}\n        self.get_logger().info('Unity Visualizer Node initialized')\n\n    def connect_to_unity(self):\n        \"\"\"Establish connection to Unity application\"\"\"\n        try:\n            self.unity_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n            self.unity_socket.connect(('localhost', 10000))\n            self.get_logger().info('Connected to Unity')\n        except Exception as e:\n            self.get_logger().error(f'Failed to connect to Unity: {e}')\n\n    def odom_callback(self, msg):\n        \"\"\"Update robot pose from odometry\"\"\"\n        self.robot_pose = msg.pose.pose\n\n    def joint_state_callback(self, msg):\n        \"\"\"Update joint positions from joint state\"\"\"\n        for i, name in enumerate(msg.name):\n            if i < len(msg.position):\n                self.joint_positions[name] = msg.position[i]\n\n    def unity_command_callback(self, msg):\n        \"\"\"Handle commands from Unity\"\"\"\n        try:\n            command = json.loads(msg.data)\n            self.get_logger().info(f'Received Unity command: {command}')\n            # Process command (e.g., send to robot controller)\n        except json.JSONDecodeError:\n            self.get_logger().error('Invalid JSON command from Unity')\n\n    def send_state_to_unity(self):\n        \"\"\"Send robot state to Unity for visualization\"\"\"\n        if self.unity_socket:\n            try:\n                state_data = {\n                    'timestamp': self.get_clock().now().nanoseconds,\n                    'robot_pose': {\n                        'x': self.robot_pose.position.x,\n                        'y': self.robot_pose.position.y,\n                        'z': self.robot_pose.position.z,\n                        'qx': self.robot_pose.orientation.x,\n                        'qy': self.robot_pose.orientation.y,\n                        'qz': self.robot_pose.orientation.z,\n                        'qw': self.robot_pose.orientation.w\n                    },\n                    'joint_positions': self.joint_positions\n                }\n\n                serialized_data = json.dumps(state_data)\n                self.unity_socket.send(serialized_data.encode('utf-8'))\n            except Exception as e:\n                self.get_logger().error(f'Failed to send data to Unity: {e}')\n\n    def destroy_node(self):\n        \"\"\"Clean up socket connection\"\"\"\n        if self.unity_socket:\n            self.unity_socket.close()\n        super().destroy_node()\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = UnityVisualizerNode()\n\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,o.jsx)(e.h3,{id:"unity-controller-node-implementation",children:"Unity Controller Node Implementation"}),"\n",(0,o.jsxs)(e.p,{children:["Create the Unity controller node in ",(0,o.jsx)(e.code,{children:"unity_integration/unity_integration/controller_node.py"}),":"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom geometry_msgs.msg import Twist\nfrom std_msgs.msg import String\nimport json\n\n\nclass UnityControllerNode(Node):\n    def __init__(self):\n        super().__init__('unity_controller_node')\n\n        # Publisher for robot commands\n        self.cmd_vel_publisher = self.create_publisher(Twist, '/cmd_vel', 10)\n\n        # Subscriber for Unity control commands\n        self.unity_control_subscriber = self.create_subscription(\n            String, '/unity_control_commands', self.control_command_callback, 10)\n\n        self.get_logger().info('Unity Controller Node initialized')\n\n    def control_command_callback(self, msg):\n        \"\"\"Process control commands from Unity\"\"\"\n        try:\n            command = json.loads(msg.data)\n\n            if command['type'] == 'teleop':\n                twist_msg = Twist()\n                twist_msg.linear.x = command.get('linear_x', 0.0)\n                twist_msg.linear.y = command.get('linear_y', 0.0)\n                twist_msg.linear.z = command.get('linear_z', 0.0)\n                twist_msg.angular.x = command.get('angular_x', 0.0)\n                twist_msg.angular.y = command.get('angular_y', 0.0)\n                twist_msg.angular.z = command.get('angular_z', 0.0)\n\n                self.cmd_vel_publisher.publish(twist_msg)\n                self.get_logger().info(f'Sent command: linear={twist_msg.linear}, angular={twist_msg.angular}')\n\n            elif command['type'] == 'navigation':\n                # Handle navigation goal commands\n                self.handle_navigation_command(command)\n\n            elif command['type'] == 'manipulation':\n                # Handle manipulation commands\n                self.handle_manipulation_command(command)\n\n        except json.JSONDecodeError:\n            self.get_logger().error('Invalid JSON command from Unity')\n        except Exception as e:\n            self.get_logger().error(f'Error processing Unity command: {e}')\n\n    def handle_navigation_command(self, command):\n        \"\"\"Handle navigation commands from Unity\"\"\"\n        # Implementation would send navigation goals\n        self.get_logger().info(f'Navigation command: {command}')\n\n    def handle_manipulation_command(self, command):\n        \"\"\"Handle manipulation commands from Unity\"\"\"\n        # Implementation would send manipulation goals\n        self.get_logger().info(f'Manipulation command: {command}')\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    node = UnityControllerNode()\n\n    try:\n        rclpy.spin(node)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        node.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,o.jsx)(e.h2,{id:"unity-scene-implementation",children:"Unity Scene Implementation"}),"\n",(0,o.jsx)(e.h3,{id:"1-robot-model-setup-in-unity",children:"1. Robot Model Setup in Unity"}),"\n",(0,o.jsx)(e.p,{children:"Create a Unity C# script to handle robot visualization:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-csharp",children:'using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing Unity.Robotics.ROSTCPConnector;\nusing Unity.Robotics.ROSTCPConnector.MessageTypes.Std_msgs;\nusing Unity.Robotics.ROSTCPConnector.MessageTypes.Geometry_msgs;\nusing Unity.Robotics.ROSTCPConnector.MessageTypes.Sensor_msgs;\nusing Newtonsoft.Json;\n\npublic class RobotVisualizer : MonoBehaviour\n{\n    [SerializeField] private GameObject robotBase;\n    [SerializeField] private Dictionary<string, GameObject> jointObjects;\n    [SerializeField] private ROSConnection ros;\n\n    private string unityTopic = "unity_commands";\n    private string controlTopic = "unity_control_commands";\n\n    void Start()\n    {\n        ros = ROSConnection.instance;\n        jointObjects = new Dictionary<string, GameObject>();\n\n        // Initialize joint objects\n        FindJointObjects();\n\n        // Start listening for robot state updates\n        StartCoroutine(ReceiveRobotState());\n    }\n\n    void FindJointObjects()\n    {\n        // Find all joint objects in the robot hierarchy\n        Transform[] allChildren = robotBase.GetComponentsInChildren<Transform>();\n        foreach (Transform child in allChildren)\n        {\n            if (child.name.Contains("joint") || child.name.Contains("Joint"))\n            {\n                jointObjects[child.name] = child.gameObject;\n            }\n        }\n    }\n\n    IEnumerator ReceiveRobotState()\n    {\n        // This would receive state from a custom ROS topic or service\n        // For this lab, we\'ll simulate receiving state updates\n        while (true)\n        {\n            // In a real implementation, this would receive actual robot state\n            yield return new WaitForSeconds(0.033f); // ~30 Hz\n        }\n    }\n\n    public void SendCommandToRobot(string commandType, Dictionary<string, float> parameters)\n    {\n        var command = new Dictionary<string, object>\n        {\n            {"type", commandType},\n            {"parameters", parameters},\n            {"timestamp", Time.time}\n        };\n\n        string jsonString = JsonConvert.SerializeObject(command);\n        ros.Send(unityTopic, new StringMsg { data = jsonString });\n    }\n\n    public void TeleopRobot(float linearX, float angularZ)\n    {\n        var teleopCommand = new Dictionary<string, float>\n        {\n            {"linear_x", linearX},\n            {"angular_z", angularZ}\n        };\n\n        SendCommandToRobot("teleop", teleopCommand);\n    }\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"2-unity-user-interface",children:"2. Unity User Interface"}),"\n",(0,o.jsx)(e.p,{children:"Create a Unity C# script for the user interface:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-csharp",children:"using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\nusing Unity.Robotics.ROSTCPConnector;\n\npublic class UnityRobotInterface : MonoBehaviour\n{\n    [SerializeField] private RobotVisualizer robotVisualizer;\n    [SerializeField] private Slider linearSpeedSlider;\n    [SerializeField] private Slider angularSpeedSlider;\n    [SerializeField] private Button forwardButton;\n    [SerializeField] private Button backwardButton;\n    [SerializeField] private Button leftButton;\n    [SerializeField] private Button rightButton;\n    [SerializeField] private Button stopButton;\n\n    private float linearSpeed = 0.5f;\n    private float angularSpeed = 0.5f;\n\n    void Start()\n    {\n        SetupUIEvents();\n    }\n\n    void SetupUIEvents()\n    {\n        linearSpeedSlider.onValueChanged.AddListener(OnLinearSpeedChanged);\n        angularSpeedSlider.onValueChanged.AddListener(OnAngularSpeedChanged);\n\n        forwardButton.onClick.AddListener(() => MoveRobot(1, 0));\n        backwardButton.onClick.AddListener(() => MoveRobot(-1, 0));\n        leftButton.onClick.AddListener(() => MoveRobot(0, 1));\n        rightButton.onClick.AddListener(() => MoveRobot(0, -1));\n        stopButton.onClick.AddListener(() => MoveRobot(0, 0));\n    }\n\n    void OnLinearSpeedChanged(float value)\n    {\n        linearSpeed = value;\n    }\n\n    void OnAngularSpeedChanged(float value)\n    {\n        angularSpeed = value;\n    }\n\n    void MoveRobot(float linearDirection, float angularDirection)\n    {\n        float linearX = linearDirection * linearSpeed;\n        float angularZ = angularDirection * angularSpeed;\n\n        robotVisualizer.TeleopRobot(linearX, angularZ);\n    }\n\n    void Update()\n    {\n        // Handle keyboard input for teleoperation\n        float linear = 0, angular = 0;\n\n        if (Input.GetKey(KeyCode.W) || Input.GetKey(KeyCode.UpArrow))\n            linear = 1;\n        else if (Input.GetKey(KeyCode.S) || Input.GetKey(KeyCode.DownArrow))\n            linear = -1;\n\n        if (Input.GetKey(KeyCode.A) || Input.GetKey(KeyCode.LeftArrow))\n            angular = 1;\n        else if (Input.GetKey(KeyCode.D) || Input.GetKey(KeyCode.RightArrow))\n            angular = -1;\n\n        if (linear != 0 || angular != 0)\n        {\n            robotVisualizer.TeleopRobot(linear * linearSpeed, angular * angularSpeed);\n        }\n    }\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"integration-testing",children:"Integration Testing"}),"\n",(0,o.jsx)(e.h3,{id:"1-setup-integration-test-environment",children:"1. Setup Integration Test Environment"}),"\n",(0,o.jsx)(e.p,{children:"Create a test script to verify Unity-ROS integration:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"#!/usr/bin/env python3\n# test_unity_integration.py\n\nimport rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\nfrom geometry_msgs.msg import Twist\nimport time\nimport json\n\n\nclass UnityIntegrationTester(Node):\n    def __init__(self):\n        super().__init__('unity_integration_tester')\n\n        # Publisher for test commands\n        self.test_publisher = self.create_publisher(String, '/unity_control_commands', 10)\n\n        # Timer for test sequence\n        self.test_timer = self.create_timer(2.0, self.run_test_sequence)\n        self.test_step = 0\n\n        self.get_logger().info('Unity Integration Tester initialized')\n\n    def run_test_sequence(self):\n        \"\"\"Run a sequence of tests to verify Unity integration\"\"\"\n        if self.test_step == 0:\n            self.get_logger().info('Test 1: Sending teleoperation command')\n            command = {\n                'type': 'teleop',\n                'linear_x': 0.5,\n                'angular_z': 0.0\n            }\n            self.send_command(command)\n\n        elif self.test_step == 1:\n            self.get_logger().info('Test 2: Sending rotation command')\n            command = {\n                'type': 'teleop',\n                'linear_x': 0.0,\n                'angular_z': 0.5\n            }\n            self.send_command(command)\n\n        elif self.test_step == 2:\n            self.get_logger().info('Test 3: Stopping robot')\n            command = {\n                'type': 'teleop',\n                'linear_x': 0.0,\n                'angular_z': 0.0\n            }\n            self.send_command(command)\n\n        elif self.test_step == 3:\n            self.get_logger().info('Test 4: Sending navigation command')\n            command = {\n                'type': 'navigation',\n                'target_x': 1.0,\n                'target_y': 1.0,\n                'target_theta': 0.0\n            }\n            self.send_command(command)\n\n        self.test_step += 1\n        if self.test_step > 3:\n            self.test_timer.cancel()\n            self.get_logger().info('All tests completed')\n\n    def send_command(self, command):\n        \"\"\"Send command to Unity controller\"\"\"\n        msg = String()\n        msg.data = json.dumps(command)\n        self.test_publisher.publish(msg)\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n    tester = UnityIntegrationTester()\n\n    try:\n        rclpy.spin(tester)\n    except KeyboardInterrupt:\n        pass\n    finally:\n        tester.destroy_node()\n        rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,o.jsx)(e.h2,{id:"running-the-unity-integration-system",children:"Running the Unity Integration System"}),"\n",(0,o.jsx)(e.h3,{id:"1-launch-gazebo-simulation",children:"1. Launch Gazebo Simulation"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Terminal 1: Start Gazebo simulation\nros2 launch your_robot_gazebo your_robot_world.launch.py\n"})}),"\n",(0,o.jsx)(e.h3,{id:"2-launch-ros-2-bridge-nodes",children:"2. Launch ROS 2 Bridge Nodes"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Terminal 2: Start Unity integration nodes\ncd ~/ros2_labs\nsource install/setup.bash\nros2 run unity_integration visualizer_node\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Terminal 3: Start Unity controller node\ncd ~/ros2_labs\nsource install/setup.bash\nros2 run unity_integration controller_node\n"})}),"\n",(0,o.jsx)(e.h3,{id:"3-run-unity-application",children:"3. Run Unity Application"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsx)(e.li,{children:"Open your Unity project"}),"\n",(0,o.jsx)(e.li,{children:"Load the robot visualization scene"}),"\n",(0,o.jsx)(e.li,{children:"Configure the ROS TCP Connector to connect to localhost:10000"}),"\n",(0,o.jsx)(e.li,{children:"Press Play to start the Unity application"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"4-test-the-integration",children:"4. Test the Integration"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# Terminal 4: Run integration tests\ncd ~/ros2_labs\nsource install/setup.bash\npython3 test_unity_integration.py\n"})}),"\n",(0,o.jsx)(e.h2,{id:"lab-exercises",children:"Lab Exercises"}),"\n",(0,o.jsx)(e.h3,{id:"exercise-1-enhanced-visualization",children:"Exercise 1: Enhanced Visualization"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsx)(e.li,{children:"Add sensor visualization (LIDAR rays, camera feed) to the Unity scene"}),"\n",(0,o.jsx)(e.li,{children:"Implement real-time sensor data visualization"}),"\n",(0,o.jsx)(e.li,{children:"Add visual effects for robot status (battery level, system health)"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"exercise-2-advanced-user-interface",children:"Exercise 2: Advanced User Interface"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsx)(e.li,{children:"Create a joystick interface for more intuitive teleoperation"}),"\n",(0,o.jsx)(e.li,{children:"Add a map view showing robot position and navigation goals"}),"\n",(0,o.jsx)(e.li,{children:"Implement a command history and playback system"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"exercise-3-multi-robot-visualization",children:"Exercise 3: Multi-Robot Visualization"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsx)(e.li,{children:"Extend the system to visualize multiple robots simultaneously"}),"\n",(0,o.jsx)(e.li,{children:"Implement robot identification and labeling"}),"\n",(0,o.jsx)(e.li,{children:"Add inter-robot communication visualization"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"exercise-4-mixed-reality-integration",children:"Exercise 4: Mixed Reality Integration"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsx)(e.li,{children:"Research and implement AR/VR integration with the system"}),"\n",(0,o.jsx)(e.li,{children:"Create immersive teleoperation interfaces"}),"\n",(0,o.jsx)(e.li,{children:"Implement gesture-based controls"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"troubleshooting-common-issues",children:"Troubleshooting Common Issues"}),"\n",(0,o.jsx)(e.h3,{id:"connection-issues",children:"Connection Issues"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Problem"}),": Unity cannot connect to ROS 2"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Solution"}),": Verify ROS TCP Connector settings, check firewall settings, ensure both systems are on the same network"]}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"synchronization-issues",children:"Synchronization Issues"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Problem"}),": Unity visualization lags behind Gazebo simulation"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Solution"}),": Increase update frequency, optimize data serialization, check network latency"]}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Problem"}),": Low frame rate in Unity application"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Solution"}),": Reduce visualization complexity, optimize robot models, use Level of Detail (LOD) systems"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,o.jsx)(e.h3,{id:"1-data-optimization",children:"1. Data Optimization"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Minimize data transmission between ROS 2 and Unity"}),"\n",(0,o.jsx)(e.li,{children:"Use efficient serialization formats"}),"\n",(0,o.jsx)(e.li,{children:"Implement data compression for large datasets"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"2-visualization-quality",children:"2. Visualization Quality"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Match visual fidelity to physics fidelity"}),"\n",(0,o.jsx)(e.li,{children:"Use consistent coordinate systems"}),"\n",(0,o.jsx)(e.li,{children:"Implement proper scaling and units"}),"\n"]}),"\n",(0,o.jsx)(e.h3,{id:"3-user-experience",children:"3. User Experience"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Provide intuitive control interfaces"}),"\n",(0,o.jsx)(e.li,{children:"Include visual feedback for all actions"}),"\n",(0,o.jsx)(e.li,{children:"Implement error handling and graceful degradation"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,o.jsx)(e.p,{children:"This lab demonstrated the integration of Unity with ROS 2 simulation systems, creating a powerful digital twin environment with advanced visualization and user interaction capabilities. You've learned to:"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Set up Unity-ROS integration"}),": Configure the communication bridge between Unity and ROS 2"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Create synchronized visualization"}),": Ensure Unity visualization matches Gazebo physics simulation"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Implement user interfaces"}),": Design intuitive interfaces for robot teleoperation"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"Validate integration"}),": Test and verify the Unity-ROS connection"]}),"\n"]}),"\n",(0,o.jsx)(e.p,{children:"The Unity integration provides a professional-grade visualization and interaction layer that enhances the development and debugging experience for robotic systems, making complex robot behaviors more accessible and understandable."})]})}function m(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(c,{...n})}):c(n)}},8453(n,e,i){i.d(e,{R:()=>r,x:()=>a});var t=i(6540);const o={},s=t.createContext(o);function r(n){const e=t.useContext(s);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),t.createElement(s.Provider,{value:e},n.children)}}}]);