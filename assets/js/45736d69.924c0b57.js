"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2785],{5846(e,n,i){i.r(n),i.d(n,{assets:()=>s,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"module-1/ros2-architecture","title":"ROS 2 Architecture","description":"Overview","source":"@site/docs/module-1/ros2-architecture.md","sourceDirName":"module-1","slug":"/module-1/ros2-architecture","permalink":"/hackathon/docs/module-1/ros2-architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/Fatimaali424/hackathon/edit/main/website/docs/module-1/ros2-architecture.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Fundamentals","permalink":"/hackathon/docs/module-1/ros2-fundamentals"},"next":{"title":"ROS 2 Integration","permalink":"/hackathon/docs/module-1/ros2-integration"}}');var l=i(4848),c=i(8453);const t={sidebar_position:3},a="ROS 2 Architecture",s={},o=[{value:"Overview",id:"overview",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Layered Architecture",id:"layered-architecture",level:2},{value:"Client Libraries Layer",id:"client-libraries-layer",level:3},{value:"ROS Client Library (rcl) Layer",id:"ros-client-library-rcl-layer",level:3},{value:"ROS Middleware Interface (rmw) Layer",id:"ros-middleware-interface-rmw-layer",level:3},{value:"Middleware Layer",id:"middleware-layer",level:3},{value:"Quality of Service (QoS) in Depth",id:"quality-of-service-qos-in-depth",level:2},{value:"Reliability Policy",id:"reliability-policy",level:3},{value:"Durability Policy",id:"durability-policy",level:3},{value:"History Policy",id:"history-policy",level:3},{value:"Execution Model",id:"execution-model",level:2},{value:"Single-threaded vs Multi-threaded Executors",id:"single-threaded-vs-multi-threaded-executors",level:3},{value:"Single-threaded Executor",id:"single-threaded-executor",level:4},{value:"Multi-threaded Executor",id:"multi-threaded-executor",level:4},{value:"Callback Groups",id:"callback-groups",level:3},{value:"Communication Patterns",id:"communication-patterns",level:2},{value:"Publisher-Subscriber Pattern",id:"publisher-subscriber-pattern",level:3},{value:"Service-Client Pattern",id:"service-client-pattern",level:3},{value:"Action Pattern",id:"action-pattern",level:3},{value:"Process Management and Lifecycle",id:"process-management-and-lifecycle",level:2},{value:"Lifecycle Nodes",id:"lifecycle-nodes",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Memory Management",id:"memory-management",level:3},{value:"Inter-Process Communication",id:"inter-process-communication",level:3},{value:"Security Architecture",id:"security-architecture",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Encryption",id:"encryption",level:3},{value:"Authorization",id:"authorization",level:3},{value:"Summary",id:"summary",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"ros-2-architecture",children:"ROS 2 Architecture"})}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(n.p,{children:"Understanding the architecture of ROS 2 is crucial for developing robust and efficient robotic applications. This chapter explores the layered architecture of ROS 2, from the client libraries to the middleware layer and communication protocols. We'll examine how ROS 2 handles distributed computing, process management, and inter-process communication."}),"\n",(0,l.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,l.jsx)(n.p,{children:"After completing this chapter, you will be able to:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Describe the layered architecture of ROS 2"}),"\n",(0,l.jsx)(n.li,{children:"Explain the role of middleware and client libraries"}),"\n",(0,l.jsx)(n.li,{children:"Configure Quality of Service (QoS) policies for different use cases"}),"\n",(0,l.jsx)(n.li,{children:"Understand the execution model and process management in ROS 2"}),"\n",(0,l.jsx)(n.li,{children:"Design efficient communication patterns for robotic systems"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"layered-architecture",children:"Layered Architecture"}),"\n",(0,l.jsx)(n.p,{children:"ROS 2 follows a layered architecture that separates concerns and provides flexibility for different use cases. The architecture consists of several layers:"}),"\n",(0,l.jsx)(n.h3,{id:"client-libraries-layer",children:"Client Libraries Layer"}),"\n",(0,l.jsx)(n.p,{children:"The client libraries provide the API that developers use to create ROS 2 applications. The most common client libraries are:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"rclcpp"}),": C++ client library"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"rclpy"}),": Python client library"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"rcl"}),": C client library (used by other client libraries)"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"ros-client-library-rcl-layer",children:"ROS Client Library (rcl) Layer"}),"\n",(0,l.jsx)(n.p,{children:"The rcl layer provides a common C-based API that all other client libraries build upon. This ensures consistency across different languages and reduces code duplication."}),"\n",(0,l.jsx)(n.h3,{id:"ros-middleware-interface-rmw-layer",children:"ROS Middleware Interface (rmw) Layer"}),"\n",(0,l.jsx)(n.p,{children:"The ROS Middleware Interface provides an abstraction layer between ROS 2 and the underlying middleware implementation. This allows ROS 2 to work with different middleware implementations like DDS providers."}),"\n",(0,l.jsx)(n.h3,{id:"middleware-layer",children:"Middleware Layer"}),"\n",(0,l.jsx)(n.p,{children:"The middleware layer handles the actual communication between nodes. ROS 2 uses DDS (Data Distribution Service) as its default middleware, with implementations from various vendors like Fast DDS, Cyclone DDS, and RTI Connext DDS."}),"\n",(0,l.jsx)(n.h2,{id:"quality-of-service-qos-in-depth",children:"Quality of Service (QoS) in Depth"}),"\n",(0,l.jsx)(n.p,{children:"QoS policies are a fundamental aspect of ROS 2 architecture that allow you to fine-tune communication behavior based on your application's requirements."}),"\n",(0,l.jsx)(n.h3,{id:"reliability-policy",children:"Reliability Policy"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:"// C++ example of setting reliability policy\nrclcpp::QoS qos(10);\nqos.reliable();  // For critical data that must be delivered\n// or\nqos.best_effort();  // For data where occasional loss is acceptable\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# Python example of setting reliability policy\nfrom rclpy.qos import QoSProfile, ReliabilityPolicy\n\nqos_profile = QoSProfile(depth=10)\nqos_profile.reliability = ReliabilityPolicy.RELIABLE\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Use cases:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Reliable: Sensor data, control commands, navigation goals"}),"\n",(0,l.jsx)(n.li,{children:"Best Effort: Camera images, LIDAR scans, status updates"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"durability-policy",children:"Durability Policy"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:"// C++ example of setting durability policy\nqos.transient_local();  // Keep messages for late-joining nodes\n// or\nqos.volatile();  // Don't keep historical messages\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Use cases:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Transient Local: Parameter updates, map data, static transforms"}),"\n",(0,l.jsx)(n.li,{children:"Volatile: Real-time sensor data, live video feeds"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"history-policy",children:"History Policy"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:"// C++ example of setting history policy\nqos.keep_all();  // Keep all messages (use with caution)\n// or\nqos.keep_last(10);  // Keep only the last N messages\n"})}),"\n",(0,l.jsx)(n.h2,{id:"execution-model",children:"Execution Model"}),"\n",(0,l.jsx)(n.h3,{id:"single-threaded-vs-multi-threaded-executors",children:"Single-threaded vs Multi-threaded Executors"}),"\n",(0,l.jsx)(n.p,{children:"ROS 2 provides different executor types to handle callback execution:"}),"\n",(0,l.jsx)(n.h4,{id:"single-threaded-executor",children:"Single-threaded Executor"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# Python example of single-threaded executor\nimport rclpy\nfrom rclpy.executors import SingleThreadedExecutor\n\nrclpy.init()\nnode = MyNode()\nexecutor = SingleThreadedExecutor()\nexecutor.add_node(node)\nexecutor.spin()\n"})}),"\n",(0,l.jsx)(n.h4,{id:"multi-threaded-executor",children:"Multi-threaded Executor"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# Python example of multi-threaded executor\nimport rclpy\nfrom rclpy.executors import MultiThreadedExecutor\n\nrclpy.init()\nnode1 = MyNode1()\nnode2 = MyNode2()\nexecutor = MultiThreadedExecutor(num_threads=4)\nexecutor.add_node(node1)\nexecutor.add_node(node2)\nexecutor.spin()\n"})}),"\n",(0,l.jsx)(n.h3,{id:"callback-groups",children:"Callback Groups"}),"\n",(0,l.jsx)(n.p,{children:"Callback groups allow you to control which callbacks can be executed concurrently:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# Python example of callback groups\nfrom rclpy.callback_groups import MutuallyExclusiveCallbackGroup, ReentrantCallbackGroup\n\n# Mutually exclusive - only one callback runs at a time\nexclusive_group = MutuallyExclusiveCallbackGroup()\n\n# Reentrant - multiple callbacks can run simultaneously\nreentrant_group = ReentrantCallbackGroup()\n\n# Assign subscriptions to different groups\nsub1 = self.create_subscription(\n    String, 'topic1', callback1, 10, callback_group=exclusive_group)\n\nsub2 = self.create_subscription(\n    String, 'topic2', callback2, 10, callback_group=reentrant_group)\n"})}),"\n",(0,l.jsx)(n.h2,{id:"communication-patterns",children:"Communication Patterns"}),"\n",(0,l.jsx)(n.h3,{id:"publisher-subscriber-pattern",children:"Publisher-Subscriber Pattern"}),"\n",(0,l.jsx)(n.p,{children:"The publisher-subscriber pattern enables asynchronous, decoupled communication:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'// C++ example of publisher-subscriber pattern\nclass Talker : public rclcpp::Node\n{\npublic:\n    Talker() : Node("talker")\n    {\n        publisher_ = this->create_publisher<std_msgs::msg::String>("chatter", 10);\n        timer_ = this->create_wall_timer(\n            500ms, std::bind(&Talker::timer_callback, this));\n    }\n\nprivate:\n    void timer_callback()\n    {\n        auto message = std_msgs::msg::String();\n        message.data = "Hello World";\n        publisher_->publish(message);\n    }\n    rclcpp::TimerBase::SharedPtr timer_;\n    rclcpp::Publisher<std_msgs::msg::String>::SharedPtr publisher_;\n};\n'})}),"\n",(0,l.jsx)(n.h3,{id:"service-client-pattern",children:"Service-Client Pattern"}),"\n",(0,l.jsx)(n.p,{children:"The service-client pattern provides synchronous request-response communication:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'// C++ example of service-client pattern\nclass AddTwoIntsService : public rclcpp::Node\n{\npublic:\n    AddTwoIntsService() : Node("add_two_ints_service")\n    {\n        service_ = this->create_service<example_interfaces::srv::AddTwoInts>(\n            "add_two_ints",\n            std::bind(&AddTwoIntsService::add, this, std::placeholders::_1, std::placeholders::_2));\n    }\n\nprivate:\n    void add(const example_interfaces::srv::AddTwoInts::Request::SharedPtr request,\n             const example_interfaces::srv::AddTwoInts::Response::SharedPtr response)\n    {\n        response->sum = request->a + request->b;\n        RCLCPP_INFO(this->get_logger(), "Incoming request: %ld + %ld = %ld",\n                    request->a, request->b, response->sum);\n    }\n    rclcpp::Service<example_interfaces::srv::AddTwoInts>::SharedPtr service_;\n};\n'})}),"\n",(0,l.jsx)(n.h3,{id:"action-pattern",children:"Action Pattern"}),"\n",(0,l.jsx)(n.p,{children:"Actions provide a way to handle long-running tasks with feedback:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"# Python example of action server\nimport rclpy\nfrom rclpy.action import ActionServer\nfrom rclpy.node import Node\nfrom example_interfaces.action import Fibonacci\n\nclass FibonacciActionServer(Node):\n\n    def __init__(self):\n        super().__init__('fibonacci_action_server')\n        self._action_server = ActionServer(\n            self,\n            Fibonacci,\n            'fibonacci',\n            self.execute_callback)\n\n    def execute_callback(self, goal_handle):\n        self.get_logger().info('Executing goal...')\n\n        feedback_msg = Fibonacci.Feedback()\n        feedback_msg.sequence = [0, 1]\n\n        for i in range(1, goal_handle.request.order):\n            if goal_handle.is_cancel_requested:\n                goal_handle.canceled()\n                self.get_logger().info('Goal canceled')\n                return Fibonacci.Result()\n\n            feedback_msg.sequence.append(\n                feedback_msg.sequence[i] + feedback_msg.sequence[i-1])\n\n            goal_handle.publish_feedback(feedback_msg)\n\n        goal_handle.succeed()\n        result = Fibonacci.Result()\n        result.sequence = feedback_msg.sequence\n        return result\n"})}),"\n",(0,l.jsx)(n.h2,{id:"process-management-and-lifecycle",children:"Process Management and Lifecycle"}),"\n",(0,l.jsx)(n.h3,{id:"lifecycle-nodes",children:"Lifecycle Nodes"}),"\n",(0,l.jsx)(n.p,{children:"Lifecycle nodes provide a way to manage the state of nodes in a more controlled manner:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'// C++ example of lifecycle node\n#include "rclcpp_lifecycle/lifecycle_node.hpp"\n\nclass LifecycleTalker : public rclcpp_lifecycle::LifecycleNode\n{\npublic:\n    LifecycleTalker() : rclcpp_lifecycle::LifecycleNode("lifecycle_talker") {}\n\nprivate:\n    rclcpp_lifecycle::LifecyclePublisher<std_msgs::msg::String>::SharedPtr pub_;\n\n    rclcpp_lifecycle::node_interfaces::LifecycleNodeInterface::CallbackReturn\n    on_configure(const rclcpp_lifecycle::State &)\n    {\n        pub_ = this->create_publisher<std_msgs::msg::String>("chatter", 10);\n        RCLCPP_INFO(get_logger(), "Configured lifecycle publisher");\n        return rclcpp_lifecycle::node_interfaces::LifecycleNodeInterface::CallbackReturn::SUCCESS;\n    }\n\n    rclcpp_lifecycle::node_interfaces::LifecycleNodeInterface::CallbackReturn\n    on_activate(const rclcpp_lifecycle::State &)\n    {\n        pub_->on_activate();\n        RCLCPP_INFO(get_logger(), "Lifecycle publisher activated");\n        return rclcpp_lifecycle::node_interfaces::LifecycleNodeInterface::CallbackReturn::SUCCESS;\n    }\n};\n'})}),"\n",(0,l.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,l.jsx)(n.h3,{id:"memory-management",children:"Memory Management"}),"\n",(0,l.jsx)(n.p,{children:"ROS 2 provides mechanisms to optimize memory usage:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-cpp",children:'// Using Intrusive List for zero-copy message passing\n#include "rclcpp/strategies/allocator_memory_strategy.hpp"\n\n// Custom allocator for message types\nauto custom_allocator = std::make_shared<std::allocator<void>>();\nauto publisher = node->create_publisher<MessageType>("topic", qos, custom_allocator);\n'})}),"\n",(0,l.jsx)(n.h3,{id:"inter-process-communication",children:"Inter-Process Communication"}),"\n",(0,l.jsx)(n.p,{children:"ROS 2 uses different IPC mechanisms based on the middleware:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Shared Memory"}),": For same-machine communication"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"TCP/UDP"}),": For network communication"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Intra-process Communication"}),": For nodes within the same process"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"security-architecture",children:"Security Architecture"}),"\n",(0,l.jsx)(n.p,{children:"ROS 2 includes built-in security features:"}),"\n",(0,l.jsx)(n.h3,{id:"authentication",children:"Authentication"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Identity verification using certificates"}),"\n",(0,l.jsx)(n.li,{children:"Certificate Authority (CA) based authentication"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"encryption",children:"Encryption"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Message encryption using AES-256"}),"\n",(0,l.jsx)(n.li,{children:"Secure transport protocols"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"authorization",children:"Authorization"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Access control lists (ACLs)"}),"\n",(0,l.jsx)(n.li,{children:"Role-based permissions"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,l.jsx)(n.p,{children:"This chapter covered the detailed architecture of ROS 2, including its layered design, Quality of Service policies, execution models, and communication patterns. We explored how to optimize performance and implement security features. Understanding these architectural concepts is essential for building robust and efficient robotic applications."}),"\n",(0,l.jsx)(n.p,{children:"The next chapter will focus on integrating ROS 2 with real robotic systems and implementing practical applications."})]})}function u(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>t,x:()=>a});var r=i(6540);const l={},c=r.createContext(l);function t(e){const n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);