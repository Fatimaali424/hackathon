"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[1393],{612(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"module-1/lab-2-services-actions","title":"Lab 2: Service and Action Implementation","description":"Overview","source":"@site/docs/module-1/lab-2-services-actions.md","sourceDirName":"module-1","slug":"/module-1/lab-2-services-actions","permalink":"/hackathon/docs/module-1/lab-2-services-actions","draft":false,"unlisted":false,"editUrl":"https://github.com/Fatimaali424/hackathon/edit/main/website/docs/module-1/lab-2-services-actions.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Lab 1: Basic ROS 2 Publisher/Subscriber","permalink":"/hackathon/docs/module-1/lab-1-publisher-subscriber"},"next":{"title":"Lab 3: Multi-node System Integration","permalink":"/hackathon/docs/module-1/lab-3-multi-node"}}');var r=i(4848),c=i(8453);const a={sidebar_position:6},t="Lab 2: Service and Action Implementation",l={},o=[{value:"Overview",id:"overview",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Lab Setup",id:"lab-setup",level:2},{value:"Service Implementation",id:"service-implementation",level:2},{value:"Creating a Custom Service Message",id:"creating-a-custom-service-message",level:3},{value:"Service Server Node",id:"service-server-node",level:3},{value:"Service Client Node",id:"service-client-node",level:3},{value:"Setup for Execution",id:"setup-for-execution",level:3},{value:"Action Implementation",id:"action-implementation",level:2},{value:"Creating a Custom Action Message",id:"creating-a-custom-action-message",level:3},{value:"Action Server Node",id:"action-server-node",level:3},{value:"Action Client Node",id:"action-client-node",level:3},{value:"C++ Implementation (Alternative)",id:"c-implementation-alternative",level:2},{value:"Service Server (C++)",id:"service-server-c",level:3},{value:"Action Server (C++)",id:"action-server-c",level:3},{value:"Building and Running the Lab",id:"building-and-running-the-lab",level:2},{value:"For Python Implementation:",id:"for-python-implementation",level:3},{value:"Monitoring Services and Actions",id:"monitoring-services-and-actions",level:2},{value:"Using ROS 2 Command Line Tools",id:"using-ros-2-command-line-tools",level:3},{value:"Lab Exercises",id:"lab-exercises",level:2},{value:"Exercise 1: Modify Service Behavior",id:"exercise-1-modify-service-behavior",level:3},{value:"Exercise 2: Action with Multiple Feedback Types",id:"exercise-2-action-with-multiple-feedback-types",level:3},{value:"Exercise 3: Service-Action Integration",id:"exercise-3-service-action-integration",level:3},{value:"Exercise 4: Error Handling and Recovery",id:"exercise-4-error-handling-and-recovery",level:3},{value:"When to Use Each Communication Pattern",id:"when-to-use-each-communication-pattern",level:2},{value:"Topics (Publisher/Subscriber)",id:"topics-publishersubscriber",level:3},{value:"Services",id:"services",level:3},{value:"Actions",id:"actions",level:3},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues",level:2},{value:"Service Issues",id:"service-issues",level:3},{value:"Action Issues",id:"action-issues",level:3},{value:"Summary",id:"summary",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"lab-2-service-and-action-implementation",children:"Lab 2: Service and Action Implementation"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"In this lab, you will implement service and action communication patterns in ROS 2. Services provide synchronous request-response communication, while actions handle long-running tasks with feedback. These patterns complement the publisher-subscriber pattern you learned in Lab 1 and are essential for building complete robotic applications."}),"\n",(0,r.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(n.p,{children:"After completing this lab, you will be able to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Create and use ROS 2 services for synchronous communication"}),"\n",(0,r.jsx)(n.li,{children:"Implement ROS 2 actions for long-running tasks with feedback"}),"\n",(0,r.jsx)(n.li,{children:"Understand when to use services vs actions vs topics"}),"\n",(0,r.jsx)(n.li,{children:"Debug service and action communication issues"}),"\n",(0,r.jsx)(n.li,{children:"Integrate services and actions with existing publisher/subscriber systems"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Completion of Lab 1 (Publisher/Subscriber)"}),"\n",(0,r.jsx)(n.li,{children:"ROS 2 Humble Hawksbill installed"}),"\n",(0,r.jsx)(n.li,{children:"Basic knowledge of Python or C++"}),"\n",(0,r.jsx)(n.li,{children:"Understanding of ROS 2 communication patterns"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"lab-setup",children:"Lab Setup"}),"\n",(0,r.jsx)(n.p,{children:"If you don't have the lab workspace from Lab 1, create it:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Navigate to your workspace\ncd ~/ros2_labs/src\n\n# If you didn't create the package in Lab 1, do so now\nros2 pkg create --build-type ament_python ros2_lab2 --dependencies rclpy std_msgs example_interfaces\n"})}),"\n",(0,r.jsx)(n.h2,{id:"service-implementation",children:"Service Implementation"}),"\n",(0,r.jsx)(n.h3,{id:"creating-a-custom-service-message",children:"Creating a Custom Service Message"}),"\n",(0,r.jsxs)(n.p,{children:["First, let's create a custom service message. Create the service definition file in ",(0,r.jsx)(n.code,{children:"ros2_lab2/srv/AddTwoInts.srv"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"int64 a\nint64 b\n---\nint64 sum\n"})}),"\n",(0,r.jsx)(n.h3,{id:"service-server-node",children:"Service Server Node"}),"\n",(0,r.jsxs)(n.p,{children:["Create the service server in ",(0,r.jsx)(n.code,{children:"ros2_lab2/ros2_lab2/service_server.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import AddTwoInts\n\n\nclass MinimalService(Node):\n\n    def __init__(self):\n        super().__init__('minimal_service')\n        self.srv = self.create_service(AddTwoInts, 'add_two_ints', self.add_two_ints_callback)\n\n    def add_two_ints_callback(self, request, response):\n        response.sum = request.a + request.b\n        self.get_logger().info('Incoming request\\na: %d b: %d' % (request.a, request.b))\n        return response\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    minimal_service = MinimalService()\n\n    rclpy.spin(minimal_service)\n\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"service-client-node",children:"Service Client Node"}),"\n",(0,r.jsxs)(n.p,{children:["Create the service client in ",(0,r.jsx)(n.code,{children:"ros2_lab2/ros2_lab2/service_client.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import sys\nimport rclpy\nfrom rclpy.node import Node\nfrom example_interfaces.srv import AddTwoInts\n\n\nclass MinimalClient(Node):\n\n    def __init__(self):\n        super().__init__('minimal_client')\n        self.cli = self.create_client(AddTwoInts, 'add_two_ints')\n        while not self.cli.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('Service not available, waiting again...')\n        self.req = AddTwoInts.Request()\n\n    def send_request(self, a, b):\n        self.req.a = a\n        self.req.b = b\n        self.future = self.cli.call_async(self.req)\n        rclpy.spin_until_future_complete(self, self.future)\n        return self.future.result()\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    minimal_client = MinimalClient()\n    response = minimal_client.send_request(int(sys.argv[1]), int(sys.argv[2]))\n    minimal_client.get_logger().info(\n        'Result of add_two_ints: for %d + %d = %d' %\n        (int(sys.argv[1]), int(sys.argv[2]), response.sum))\n\n    minimal_client.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h3,{id:"setup-for-execution",children:"Setup for Execution"}),"\n",(0,r.jsxs)(n.p,{children:["Update the ",(0,r.jsx)(n.code,{children:"setup.py"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"from setuptools import find_packages, setup\n\npackage_name = 'ros2_lab2'\n\nsetup(\n    name=package_name,\n    version='0.0.0',\n    packages=find_packages(exclude=['test']),\n    data_files=[\n        ('share/ament_index/resource_index/packages',\n            ['resource/' + package_name]),\n        ('share/' + package_name, ['package.xml']),\n    ],\n    install_requires=['setuptools'],\n    zip_safe=True,\n    maintainer='your_name',\n    maintainer_email='your_email@example.com',\n    description='ROS 2 services and actions lab',\n    license='Apache-2.0',\n    tests_require=['pytest'],\n    entry_points={\n        'console_scripts': [\n            'server = ros2_lab2.service_server:main',\n            'client = ros2_lab2.service_client:main',\n            'action_server = ros2_lab2.action_server:main',\n            'action_client = ros2_lab2.action_client:main',\n        ],\n    },\n)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"action-implementation",children:"Action Implementation"}),"\n",(0,r.jsx)(n.h3,{id:"creating-a-custom-action-message",children:"Creating a Custom Action Message"}),"\n",(0,r.jsxs)(n.p,{children:["Create an action definition file in ",(0,r.jsx)(n.code,{children:"ros2_lab2/action/Fibonacci.action"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"int32 order\n---\nint32[] sequence\n---\nint32[] partial_sequence\n"})}),"\n",(0,r.jsx)(n.h3,{id:"action-server-node",children:"Action Server Node"}),"\n",(0,r.jsxs)(n.p,{children:["Create the action server in ",(0,r.jsx)(n.code,{children:"ros2_lab2/ros2_lab2/action_server.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import time\nimport rclpy\nfrom rclpy.action import ActionServer, CancelResponse, GoalResponse\nfrom rclpy.callback_groups import ReentrantCallbackGroup\nfrom rclpy.executors import MultiThreadedExecutor\nfrom rclpy.node import Node\n\nfrom example_interfaces.action import Fibonacci\n\n\nclass FibonacciActionServer(Node):\n\n    def __init__(self):\n        super().__init__(\'fibonacci_action_server\')\n        self._action_server = ActionServer(\n            self,\n            Fibonacci,\n            \'fibonacci\',\n            execute_callback=self.execute_callback,\n            callback_group=ReentrantCallbackGroup(),\n            goal_callback=self.goal_callback,\n            handle_accepted_callback=self.handle_accepted_callback,\n            cancel_callback=self.cancel_callback)\n\n    def destroy_node(self):\n        self._action_server.destroy()\n        super().destroy_node()\n\n    def goal_callback(self, goal_request):\n        """Accept or reject a client request to begin an action."""\n        self.get_logger().info(\'Received goal request\')\n        return GoalResponse.ACCEPT\n\n    def handle_accepted_callback(self, goal_handle):\n        """Handle an accepted goal."""\n        self.get_logger().info(\'Goal accepted\')\n        # Start executing the action\n        goal_handle.execute()\n\n    def cancel_callback(self, goal):\n        """Accept or reject a client request to cancel an action."""\n        self.get_logger().info(\'Received cancel request\')\n        return CancelResponse.ACCEPT\n\n    def execute_callback(self, goal_handle):\n        """Execute the goal."""\n        self.get_logger().info(\'Executing goal...\')\n\n        # Get the goal order\n        order = goal_handle.request.order\n\n        # Create feedback and result messages\n        feedback_msg = Fibonacci.Feedback()\n        feedback_msg.sequence = [0, 1]\n\n        # Simulate long-running task\n        for i in range(1, order):\n            # Check if there was a cancel request\n            if goal_handle.is_cancel_requested:\n                goal_handle.canceled()\n                self.get_logger().info(\'Goal canceled\')\n                return Fibonacci.Result()\n\n            # Update feedback\n            feedback_msg.sequence.append(\n                feedback_msg.sequence[i] + feedback_msg.sequence[i-1])\n            self.get_logger().info(f\'Feedback: {feedback_msg.sequence}\')\n\n            # Publish feedback\n            goal_handle.publish_feedback(feedback_msg)\n\n            # Simulate work\n            time.sleep(1.0)\n\n        # Check if goal was canceled\n        if goal_handle.is_cancel_requested:\n            goal_handle.canceled()\n            self.get_logger().info(\'Goal canceled\')\n            return Fibonacci.Result()\n\n        # Set result and succeed\n        goal_handle.succeed()\n        result = Fibonacci.Result()\n        result.sequence = feedback_msg.sequence\n        self.get_logger().info(f\'Result: {result.sequence}\')\n\n        return result\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    fibonacci_action_server = FibonacciActionServer()\n\n    # Use a MultiThreadedExecutor to enable processing goals concurrently\n    executor = MultiThreadedExecutor()\n    rclpy.spin(fibonacci_action_server, executor=executor)\n\n    fibonacci_action_server.destroy_node()\n    rclpy.shutdown()\n\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,r.jsx)(n.h3,{id:"action-client-node",children:"Action Client Node"}),"\n",(0,r.jsxs)(n.p,{children:["Create the action client in ",(0,r.jsx)(n.code,{children:"ros2_lab2/ros2_lab2/action_client.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import sys\nimport time\n\nimport rclpy\nfrom rclpy.action import ActionClient\nfrom rclpy.callback_groups import ReentrantCallbackGroup\nfrom rclpy.node import Node\n\nfrom example_interfaces.action import Fibonacci\n\n\nclass FibonacciActionClient(Node):\n\n    def __init__(self):\n        super().__init__('fibonacci_action_client')\n        self._action_client = ActionClient(\n            self,\n            Fibonacci,\n            'fibonacci',\n            callback_group=ReentrantCallbackGroup())\n\n    def send_goal(self, order):\n        # Wait for the action server to be available\n        self.get_logger().info('Waiting for action server...')\n        self._action_client.wait_for_server()\n\n        # Create a goal message\n        goal_msg = Fibonacci.Goal()\n        goal_msg.order = order\n\n        # Send the goal\n        self.get_logger().info(f'Sending goal with order: {order}')\n        send_goal_future = self._action_client.send_goal_async(\n            goal_msg,\n            feedback_callback=self.feedback_callback)\n\n        # Add a callback to handle the result\n        send_goal_future.add_done_callback(self.goal_response_callback)\n\n        return send_goal_future\n\n    def goal_response_callback(self, future):\n        goal_handle = future.result()\n        if not goal_handle.accepted:\n            self.get_logger().info('Goal rejected :(')\n            return\n\n        self.get_logger().info('Goal accepted :)')\n        get_result_future = goal_handle.get_result_async()\n        get_result_future.add_done_callback(self.get_result_callback)\n\n    def get_result_callback(self, future):\n        result = future.result().result\n        self.get_logger().info(f'Result: {result.sequence}')\n        rclpy.shutdown()\n\n    def feedback_callback(self, feedback_msg):\n        feedback = feedback_msg.feedback\n        self.get_logger().info(f'Received feedback: {feedback.sequence}')\n\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    action_client = FibonacciActionClient()\n\n    # Send goal based on command line argument\n    goal_order = int(sys.argv[1]) if len(sys.argv) > 1 else 10\n    future = action_client.send_goal(goal_order)\n\n    # Keep spinning until the result is received\n    rclpy.spin(action_client)\n\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.h2,{id:"c-implementation-alternative",children:"C++ Implementation (Alternative)"}),"\n",(0,r.jsx)(n.p,{children:"For those who prefer C++, here's the equivalent implementation:"}),"\n",(0,r.jsx)(n.h3,{id:"service-server-c",children:"Service Server (C++)"}),"\n",(0,r.jsxs)(n.p,{children:["Create ",(0,r.jsx)(n.code,{children:"ros2_lab2/src/service_server.cpp"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'#include "rclcpp/rclcpp.hpp"\n#include "example_interfaces/srv/add_two_ints.hpp"\n\nusing AddTwoInts = example_interfaces::srv::AddTwoInts;\n\nclass MinimalService : public rclcpp::Node\n{\npublic:\n    MinimalService()\n    : Node("minimal_service")\n    {\n        using std::placeholders::_1;\n        using std::placeholders::_2;\n        service_ = this->create_service<AddTwoInts>(\n            "add_two_ints",\n            std::bind(&MinimalService::add, this, _1, _2));\n    }\n\nprivate:\n    void add(const AddTwoInts::Request::SharedPtr request,\n             const AddTwoInts::Response::SharedPtr response)\n    {\n        response->sum = request->a + request->b;\n        RCLCPP_INFO(rclcpp::get_logger("rclcpp"), "Incoming request\\na: %ld b: %ld",\n                    request->a, request->b);\n        RCLCPP_INFO(rclcpp::get_logger("rclcpp"), "Sending back response: [%ld]", (long int)response->sum);\n    }\n    rclcpp::Service<AddTwoInts>::SharedPtr service_;\n};\n\nint main(int argc, char * argv[])\n{\n    rclcpp::init(argc, argv);\n    rclcpp::spin(std::make_shared<MinimalService>());\n    rclcpp::shutdown();\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"action-server-c",children:"Action Server (C++)"}),"\n",(0,r.jsxs)(n.p,{children:["Create ",(0,r.jsx)(n.code,{children:"ros2_lab2/src/action_server.cpp"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'#include "example_interfaces/action/fibonacci.hpp"\n#include "rclcpp/rclcpp.hpp"\n#include "rclcpp_action/rclcpp_action.hpp"\n\n#include <memory>\n#include <thread>\n\nclass MinimalActionServer : public rclcpp::Node\n{\npublic:\n    using Fibonacci = example_interfaces::action::Fibonacci;\n    using GoalHandleFibonacci = rclcpp_action::ServerGoalHandle<Fibonacci>;\n\n    explicit MinimalActionServer(const rclcpp::NodeOptions & options = rclcpp::NodeOptions())\n    : Node("minimal_action_server", options)\n    {\n        using namespace std::placeholders;\n\n        action_server_ = rclcpp_action::create_server<Fibonacci>(\n            this,\n            "fibonacci",\n            std::bind(&MinimalActionServer::handle_goal, this, _1, _2),\n            std::bind(&MinimalActionServer::handle_cancel, this, _1),\n            std::bind(&MinimalActionServer::handle_accepted, this, _1));\n    }\n\nprivate:\n    rclcpp_action::Server<Fibonacci>::SharedPtr action_server_;\n\n    rclcpp_action::GoalResponse handle_goal(\n        const rclcpp_action::GoalUUID & uuid,\n        std::shared_ptr<const Fibonacci::Goal> goal)\n    {\n        RCLCPP_INFO(this->get_logger(), "Received goal request with order %d", goal->order);\n        (void)uuid;\n        return rclcpp_action::GoalResponse::ACCEPT_AND_EXECUTE;\n    }\n\n    rclcpp_action::CancelResponse handle_cancel(\n        const std::shared_ptr<GoalHandleFibonacci> goal_handle)\n    {\n        RCLCPP_INFO(this->get_logger(), "Received cancel request");\n        (void)goal_handle;\n        return rclcpp_action::CancelResponse::ACCEPT;\n    }\n\n    void handle_accepted(const std::shared_ptr<GoalHandleFibonacci> goal_handle)\n    {\n        using namespace std::placeholders;\n        std::thread{std::bind(&MinimalActionServer::execute, this, _1), goal_handle}.detach();\n    }\n\n    void execute(const std::shared_ptr<GoalHandleFibonacci> goal_handle)\n    {\n        RCLCPP_INFO(this->get_logger(), "Executing goal");\n\n        rclcpp::Rate loop_rate(1);\n        const auto goal = goal_handle->get_goal();\n        auto feedback = std::make_shared<Fibonacci::Feedback>();\n        auto result = std::make_shared<Fibonacci::Result>();\n\n        // Start executing the action\n        auto sequence = std::vector<int32_t>{};\n        sequence.push_back(0);\n        sequence.push_back(1);\n\n        auto comm_index = 0;\n        for (int32_t i = 1; (i < goal->order) && (rclcpp::ok()); ++i) {\n            // Check if there is a cancel request\n            if (goal_handle->is_canceling()) {\n                result->sequence = sequence;\n                goal_handle->canceled(result);\n                RCLCPP_INFO(this->get_logger(), "Goal Canceled");\n                return;\n            }\n\n            // Update sequence\n            sequence.push_back(sequence[i] + sequence[i - 1]);\n\n            // Publish feedback\n            feedback->sequence = sequence;\n            goal_handle->publish_feedback(feedback);\n            RCLCPP_INFO(this->get_logger(), "Publish Feedback");\n\n            loop_rate.sleep();\n        }\n\n        // Check if goal is done\n        if (rclcpp::ok()) {\n            result->sequence = sequence;\n            goal_handle->succeed(result);\n            RCLCPP_INFO(this->get_logger(), "Goal Succeeded");\n        }\n    }\n};\n\nint main(int argc, char ** argv)\n{\n    rclcpp::init(argc, argv);\n    auto action_server = std::make_shared<MinimalActionServer>();\n    rclcpp::spin(action_server);\n    rclcpp::shutdown();\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"building-and-running-the-lab",children:"Building and Running the Lab"}),"\n",(0,r.jsx)(n.h3,{id:"for-python-implementation",children:"For Python Implementation:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Navigate to your workspace\ncd ~/ros2_labs\n\n# Build the package\ncolcon build --packages-select ros2_lab2\n\n# Source the workspace\nsource install/setup.bash\n\n# Run the service server in one terminal\nros2 run ros2_lab2 server\n\n# In another terminal, run the service client\nros2 run ros2_lab2 client 10 20\n\n# Run the action server in one terminal\nros2 run ros2_lab2 action_server\n\n# In another terminal, run the action client\nros2 run ros2_lab2 action_client 10\n"})}),"\n",(0,r.jsx)(n.h2,{id:"monitoring-services-and-actions",children:"Monitoring Services and Actions"}),"\n",(0,r.jsx)(n.h3,{id:"using-ros-2-command-line-tools",children:"Using ROS 2 Command Line Tools"}),"\n",(0,r.jsx)(n.p,{children:"Monitor services and actions:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# List all services\nros2 service list\n\n# Get information about a specific service\nros2 service info /add_two_ints\n\n# Call a service directly from command line\nros2 service call /add_two_ints example_interfaces/srv/AddTwoInts "{a: 10, b: 20}"\n\n# List all actions\nros2 action list\n\n# Get information about a specific action\nros2 action info /fibonacci\n\n# Send a goal to an action server\nros2 action send_goal /fibonacci example_interfaces/action/Fibonacci "{order: 10}"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"lab-exercises",children:"Lab Exercises"}),"\n",(0,r.jsx)(n.h3,{id:"exercise-1-modify-service-behavior",children:"Exercise 1: Modify Service Behavior"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Create a service that performs more complex calculations (e.g., geometric operations)"}),"\n",(0,r.jsx)(n.li,{children:"Add error handling for invalid inputs"}),"\n",(0,r.jsx)(n.li,{children:"Implement service timeouts"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"exercise-2-action-with-multiple-feedback-types",children:"Exercise 2: Action with Multiple Feedback Types"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Modify the Fibonacci action to provide different types of feedback"}),"\n",(0,r.jsx)(n.li,{children:"Add intermediate goals that can be reached during execution"}),"\n",(0,r.jsx)(n.li,{children:"Implement action preemption (canceling current goal to start a new one)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"exercise-3-service-action-integration",children:"Exercise 3: Service-Action Integration"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Create a system that uses both services and actions together"}),"\n",(0,r.jsx)(n.li,{children:"Implement a service that manages multiple action goals"}),"\n",(0,r.jsx)(n.li,{children:"Design a coordinator node that decides when to use services vs actions"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"exercise-4-error-handling-and-recovery",children:"Exercise 4: Error Handling and Recovery"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Add comprehensive error handling to your service and action implementations"}),"\n",(0,r.jsx)(n.li,{children:"Implement retry mechanisms for failed communications"}),"\n",(0,r.jsx)(n.li,{children:"Create a monitoring node that tracks service/action success rates"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"when-to-use-each-communication-pattern",children:"When to Use Each Communication Pattern"}),"\n",(0,r.jsx)(n.h3,{id:"topics-publishersubscriber",children:"Topics (Publisher/Subscriber)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use when you need asynchronous, decoupled communication"}),"\n",(0,r.jsx)(n.li,{children:"Good for continuous data streams (sensor data, status updates)"}),"\n",(0,r.jsx)(n.li,{children:"When multiple publishers/subscribers are needed"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"services",children:"Services"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use for synchronous request-response patterns"}),"\n",(0,r.jsx)(n.li,{children:"When you need guaranteed delivery and response"}),"\n",(0,r.jsx)(n.li,{children:"For operations that should complete quickly"}),"\n",(0,r.jsx)(n.li,{children:"When you need a simple, direct communication"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"actions",children:"Actions"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Use for long-running operations with feedback"}),"\n",(0,r.jsx)(n.li,{children:"When you need to track progress of a task"}),"\n",(0,r.jsx)(n.li,{children:"For operations that might be canceled"}),"\n",(0,r.jsx)(n.li,{children:"When you need to handle goals with intermediate results"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting-common-issues",children:"Troubleshooting Common Issues"}),"\n",(0,r.jsx)(n.h3,{id:"service-issues",children:"Service Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Service not found"}),": Check that the service server is running and service names match"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Timeout errors"}),": Increase timeout values or check network connectivity"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Type mismatch"}),": Ensure request/response message types match"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"action-issues",children:"Action Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Goal not accepted"}),": Check that the action server is running and accepting goals"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Feedback not received"}),": Verify the action server is publishing feedback"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cancel not working"}),": Ensure proper cancel handling in the action server"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(n.p,{children:"In this lab, you've implemented both service and action communication patterns in ROS 2:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Services"}),": Synchronous request-response communication for immediate operations"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Actions"}),": Long-running operations with feedback, status, and cancellation support"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"When to use each pattern"}),": Understanding the appropriate use cases for topics, services, and actions"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"These communication patterns, combined with the publisher/subscriber pattern from Lab 1, provide a complete toolkit for building complex robotic applications with ROS 2."})]})}function u(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>a,x:()=>t});var s=i(6540);const r={},c=s.createContext(r);function a(e){const n=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);